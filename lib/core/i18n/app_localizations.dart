import 'dart:async';
import 'package:flutter/material.dart';

class AppLocalizations {
  AppLocalizations(this.locale);

  final Locale locale;

  static const LocalizationsDelegate<AppLocalizations> delegate =
      _AppLocalizationsDelegate();

  static const supportedLocales = [Locale('ar'), Locale('en')];

  static const _localizedValues = <String, Map<String, String>>{
    'ar': {
      'appName': 'جويل إكس',
      'skip': 'تخطي',
      'next': 'التالي',
      'getStarted': 'ابدأ الآن',
      'signIn': 'تسجيل الدخول',
      'signUp': 'إنشاء حساب',
      'guest': 'الدخول كضيف',
      'email': 'البريد الإلكتروني',
      'password': 'كلمة المرور',
      'confirmPassword': 'تأكيد كلمة المرور',
      'passwordTooShort': 'كلمة المرور قصيرة جدًا',
      'passwordsDoNotMatch': 'كلمتا المرور غير متطابقتين',
      'showPassword': 'إظهار',
      'hidePassword': 'إخفاء',
      'forgotPassword': 'نسيت كلمة المرور؟',
      'home': 'الرئيسية',
      'catalog': 'الكتالوج',
      'search': 'بحث',
      'favorites': 'مفضلة',
      'cart': 'السلة',
      'profile': 'حسابي',
      'settings': 'الإعدادات',
      'accountSettings': 'إعدادات الحساب',
      'appPreferences': 'تخصيص التطبيق',
      'marketplaceTools': 'أدوات السوق',
      'language': 'اللغة',
      'theme': 'المظهر',
      'darkMode': 'الوضع الليلي',
      'primaryColor': 'اللون الرئيسي',
      'tintPickerHelp': 'حرّك المنزلق لاختيار درجة قريبة من اللون الرئيسي.',
      'signOut': 'تسجيل الخروج',
      'brands': 'الماركات',
      'brand': 'الماركة',
      'newArrivals': 'وصل حديثاً',
      'offers': 'عروض',
      'aiInfo': 'معلومة بالذكاء الاصطناعي',
      'sizes': 'المقاسات',
      'ringSize': 'مقاس الخاتم',
      'carat': 'قيراط',
      'weight': 'الوزن',
      'material': 'المعدن',
      'gem': 'الحجر',
      'condition': 'الحالة',
      'price': 'السعر',
      'negotiable': 'قابل للتفاوض',
      'addToCart': 'أضف إلى السلة',
      'addedToCart': 'تمت إضافة العنصر إلى السلة',
      'contactSeller': 'تواصل مع البائع',
      'contactOptions': 'طرق التواصل',
      'callSeller': 'اتصال هاتفي',
      'emailSeller': 'إرسال بريد إلكتروني',
      'whatsappSeller': 'التواصل عبر واتساب',
      'launchFailed': 'تعذر فتح الرابط على هذا الجهاز',
      'send': 'إرسال',
      'checkout': 'إتمام الشراء',
      'placeOrder': 'تأكيد الطلب',
      'compare': 'مقارنة',
      'remove': 'إزالة',
      'compareNow': 'قارن الآن',
      'pullToRefresh': 'اسحب للتحديث',
      'myItems': 'مقتنياتي',
      'tabAllItems': 'الكل',
      'itemName': 'اسم العنصر',
      'addItem': 'إضافة عنصر',
      'sellNow': 'عرض للبيع',
      'awaitOffers': 'انتظار عروض',
      'tips': 'نصائح',
      'repairs': 'إصلاحات مقترحة',
      'notifications': 'إشعارات',
      'notificationPreferences': 'خيارات الإشعارات',
      'allNotifications': 'جميع الإشعارات',
      'noNotifications': 'لا توجد إشعارات بعد',
      'clearAll': 'مسح الكل',
      'notifications.offer': 'عروض جديدة',
      'notifications.offer.description':
          'إشعار عند وصول عرض على عناصر البيع الخاصة بك.',
      'notifications.wishlist': 'قائمة الرغبات',
      'notifications.wishlist.description':
          'إشعار عند انتظار العروض على مقتنياتك.',
      'notifications.priceAlert': 'تغييرات الأسعار',
      'notifications.priceAlert.description':
          'إشعار عند نشر عنصر بسعر جديد.',
      'notifications.newArrival': 'وصول جديد',
      'notifications.newArrival.description':
          'تنبيه بعناصر جديدة في السوق المختار.',
      'savedSearches': 'عمليات البحث المحفوظة',
      'saveSearch': 'حفظ البحث',
      'searchSaved': 'تم حفظ البحث',
      'searchNameLabel': 'اسم البحث',
      'priceAlertLabel': 'تنبيه السعر (اختياري)',
      'setPriceAlert': 'تعيين تنبيه سعر',
      'priceAlertBelow': 'أبلغني عند السعر ≤ {value}',
      'noPriceAlert': 'لا يوجد تنبيه سعر',
      'noSavedSearches': 'لا توجد عمليات بحث محفوظة بعد.',
      'noFiltersApplied': 'لم يتم تطبيق أي فلاتر',
      'triggerPriceAlerts': 'تفعيل تنبيهات السعر الآن',
      'priceAlertsTriggered': 'تم فحص تنبيهات السعر',
      'opacityControl': 'شفافية الخلفية',
      'opacityPickerHelp': 'اضبط الشفافية بين ‎50%‎ و‎100%‎ حسب راحتك.',
      'cancel': 'إلغاء',
      'justNow': 'الآن',
      'minutesAgo': 'قبل {value} دقيقة',
      'hoursAgo': 'قبل {value} ساعة',
      'daysAgo': 'قبل {value} يوم',
      'receivedOffer': 'تم استلام عرض',
      'noPriceShown': 'بدون سعر معلن',
      'filters': 'فلاتر',
      'sortBy': 'ترتيب حسب',
      'sortPriceLowHigh': 'السعر: من الأقل إلى الأعلى',
      'sortPriceHighLow': 'السعر: من الأعلى إلى الأقل',
      'sortNewest': 'الأحدث أولاً',
      'ring': 'خاتم',
      'necklace': 'قلادة',
      'bracelet': 'سوار',
      'earring': 'قرط',
      'metalColor': 'لون المعدن',
      'gold': 'ذهب',
      'silver': 'فضة',
      'roseGold': 'ذهب وردي',
      'platinum': 'بلاتين',
      'apply': 'تطبيق',
      'reset': 'إعادة ضبط',
      'details': 'التفاصيل',
      'more': 'المزيد',
      'seeAll': 'عرض الكل',
      'sizeGuide': 'دليل المقاسات',
      'searchHint': 'ابحث بالاسم، الحجر، العيار، الوصف…',
      'noSearchResults': 'لا توجد نتائج مطابقة حالياً',
      'carCatalog': 'كتالوج السيارات',
      'carCompare': 'مقارنة السيارات',
      'emptyCatalog': 'لا توجد عناصر مطابقة حالياً',
      'themeUpdated': 'تم تحديث المظهر',
      'languageUpdated': 'تم تغيير اللغة',
      'tutorial': 'جولة توجيهية',
      'resetDemoData': 'إعادة تعيين بيانات العرض',
      'viewSizeGuide': 'عرض دليل المقاسات',
      'aiInsightDescription':
          'سيتم لاحقًا استخدام الذكاء الاصطناعي لشرح مواصفات الحجر والمعدن.',
      'ok': 'حسنًا',
      'threeDUnavailable': 'تعذر تحميل العارض ثلاثي الأبعاد الآن',
      'showTutorialAgain': 'إعادة عرض الشرح',
      'demoDataReset': 'تمت إعادة ضبط بيانات العرض.',
      'tutorialReset': 'سيظهر الشرح التفاعلي عند التشغيل التالي.',
      'currencySymbol': 'ر.س ',
      'priceOnRequest': 'السعر عند الطلب',
      'cartEmpty': 'سلتك فارغة حاليًا.',
      'goShopping': 'ابدأ التسوق',
      'applyCoupon': 'أدخل كوبون الخصم',
      'couponApplied': 'تم تطبيق خصم JEWEL10 (10%).',
      'couponCleared': 'تمت إزالة كوبون الخصم.',
      'invalidCoupon': 'كوبون غير صالح.',
      'clearCart': 'إفراغ السلة',
      'subtotal': 'الإجمالي الفرعي',
      'discount': 'الخصم',
      'shipping': 'الشحن',
      'total': 'الإجمالي',
      'addressStep': 'العنوان',
      'reviewStep': 'مراجعة',
      'confirmStep': 'تأكيد',
      'fieldRequired': 'هذا الحقل مطلوب',
      'reviewItems': 'مراجعة العناصر',
      'confirmDetails': 'تأكيد التفاصيل',
      'orderSuccess': 'تم تنفيذ الطلب بنجاح!',
      'back': 'السابق',
      'messages': 'الرسائل',
      'noMessages': 'لا توجد محادثات بعد. تواصل مع البائع من صفحة التفاصيل.',
      'conversationWith': 'محادثة حول',
      'messagePlaceholder': 'اكتب رسالة للبائع…',
      'fullName': 'الاسم الكامل',
      'phone': 'رقم الهاتف',
      'city': 'المدينة',
      'street': 'الشارع',
      'note': 'ملاحظة',
    },
    'en': {
      'appName': 'JewelX',
      'skip': 'Skip',
      'next': 'Next',
      'getStarted': 'Get Started',
      'signIn': 'Sign In',
      'signUp': 'Create Account',
      'guest': 'Continue as Guest',
      'email': 'Email',
      'password': 'Password',
      'confirmPassword': 'Confirm password',
      'passwordTooShort': 'Password is too short',
      'passwordsDoNotMatch': 'Passwords do not match',
      'showPassword': 'Show',
      'hidePassword': 'Hide',
      'forgotPassword': 'Forgot Password?',
      'home': 'Home',
      'catalog': 'Catalog',
      'search': 'Search',
      'favorites': 'Favorites',
      'cart': 'Cart',
      'profile': 'Profile',
      'settings': 'Settings',
      'accountSettings': 'Account settings',
      'appPreferences': 'App preferences',
      'marketplaceTools': 'Marketplace tools',
      'language': 'Language',
      'theme': 'Theme',
      'darkMode': 'Dark Mode',
      'primaryColor': 'Primary Color',
      'tintPickerHelp': 'Slide to adjust a tint close to the brand color.',
      'signOut': 'Sign out',
      'brands': 'Brands',
      'brand': 'Brand',
      'newArrivals': 'New Arrivals',
      'offers': 'Offers',
      'aiInfo': 'AI Insight',
      'sizes': 'Sizes',
      'ringSize': 'Ring Size',
      'carat': 'Carat',
      'weight': 'Weight',
      'material': 'Metal',
      'gem': 'Gemstone',
      'condition': 'Condition',
      'price': 'Price',
      'negotiable': 'Negotiable',
      'addToCart': 'Add to Cart',
      'addedToCart': 'Item added to cart',
      'contactSeller': 'Contact Seller',
      'contactOptions': 'Contact options',
      'callSeller': 'Call seller',
      'emailSeller': 'Email seller',
      'whatsappSeller': 'Message on WhatsApp',
      'launchFailed': 'Could not open this link on the device',
      'send': 'Send',
      'checkout': 'Checkout',
      'placeOrder': 'Place Order',
      'compare': 'Compare',
      'remove': 'Remove',
      'compareNow': 'Compare Now',
      'pullToRefresh': 'Pull to refresh',
      'myItems': 'My Items',
      'tabAllItems': 'All',
      'itemName': 'Item name',
      'addItem': 'Add Item',
      'sellNow': 'List for Sale',
      'awaitOffers': 'Await Offers',
      'tips': 'Tips',
      'repairs': 'Suggested Repairs',
      'notifications': 'Notifications',
      'notificationPreferences': 'Notification preferences',
      'allNotifications': 'All notifications',
      'noNotifications': 'You are all caught up!',
      'clearAll': 'Clear all',
      'notifications.offer': 'New offers',
      'notifications.offer.description':
          'Get alerted when someone sends an offer on your listings.',
      'notifications.wishlist': 'Wishlist',
      'notifications.wishlist.description':
          'Be notified when items you follow start accepting offers.',
      'notifications.priceAlert': 'Price changes',
      'notifications.priceAlert.description':
          'Stay informed when a listed item updates its price.',
      'notifications.newArrival': 'New arrivals',
      'notifications.newArrival.description':
          'Discover newly published pieces in your feed.',
      'savedSearches': 'Saved Searches',
      'saveSearch': 'Save Search',
      'searchSaved': 'Search saved',
      'searchNameLabel': 'Search name',
      'priceAlertLabel': 'Price alert (optional)',
      'setPriceAlert': 'Set price alert',
      'priceAlertBelow': 'Alert me when price ≤ {value}',
      'noPriceAlert': 'No price alert set',
      'noSavedSearches': 'No saved searches yet.',
      'noFiltersApplied': 'No filters applied',
      'triggerPriceAlerts': 'Trigger price alerts now',
      'priceAlertsTriggered': 'Price alerts checked',
      'opacityControl': 'Background opacity',
      'opacityPickerHelp': 'Adjust the background transparency between 50% and 100%.',
      'cancel': 'Cancel',
      'justNow': 'just now',
      'minutesAgo': '{value} min ago',
      'hoursAgo': '{value} h ago',
      'daysAgo': '{value} d ago',
      'receivedOffer': 'Received Offer',
      'noPriceShown': 'No public price',
      'filters': 'Filters',
      'sortBy': 'Sort by',
      'sortPriceLowHigh': 'Price: Low to High',
      'sortPriceHighLow': 'Price: High to Low',
      'sortNewest': 'Newest first',
      'ring': 'Ring',
      'necklace': 'Necklace',
      'bracelet': 'Bracelet',
      'earring': 'Earring',
      'metalColor': 'Metal color',
      'gold': 'Gold',
      'silver': 'Silver',
      'roseGold': 'Rose Gold',
      'platinum': 'Platinum',
      'apply': 'Apply',
      'reset': 'Reset',
      'details': 'Details',
      'more': 'More',
      'seeAll': 'See All',
      'sizeGuide': 'Size Guide',
      'searchHint': 'Search by name, gem, carat, description…',
      'noSearchResults': 'No items match your search yet',
      'carCatalog': 'Car Catalog',
      'carCompare': 'Car Compare',
      'emptyCatalog': 'No items match your filters yet',
      'themeUpdated': 'Theme updated',
      'languageUpdated': 'Language updated',
      'tutorial': 'Tutorial',
      'resetDemoData': 'Reset demo data',
      'viewSizeGuide': 'View size guide',
      'aiInsightDescription':
          'AI will soon describe gemstone and metal characteristics here.',
      'ok': 'OK',
      'threeDUnavailable': '3D preview is unavailable right now',
      'showTutorialAgain': 'Replay walkthrough',
      'demoDataReset': 'Demo data has been refreshed.',
      'tutorialReset': 'Tutorial will show again next launch.',
      'currencySymbol': r'$',
      'priceOnRequest': 'Price on request',
      'cartEmpty': 'Your cart is empty for now.',
      'goShopping': 'Browse jewelry',
      'applyCoupon': 'Apply coupon',
      'couponApplied': 'Coupon JEWEL10 applied (10% off).',
      'couponCleared': 'Coupon removed.',
      'invalidCoupon': 'Coupon not valid.',
      'clearCart': 'Clear cart',
      'subtotal': 'Subtotal',
      'discount': 'Discount',
      'shipping': 'Shipping',
      'total': 'Total',
      'addressStep': 'Address',
      'reviewStep': 'Review',
      'confirmStep': 'Confirm',
      'fieldRequired': 'Required field',
      'reviewItems': 'Review items',
      'confirmDetails': 'Confirm details',
      'orderSuccess': 'Order placed successfully!',
      'back': 'Back',
      'messages': 'Messages',
      'noMessages': 'No conversations yet. Contact a seller from item details.',
      'conversationWith': 'Conversation about',
      'messagePlaceholder': 'Write a message to the seller…',
      'fullName': 'Full name',
      'phone': 'Phone',
      'city': 'City',
      'street': 'Street',
      'note': 'Note',
    },
  };

  String translate(String key, {Map<String, Object>? args}) {
    final template = _localizedValues[locale.languageCode]?[key] ??
        _localizedValues['en']![key] ?? key;
    if (args == null || args.isEmpty) {
      return template;
    }
    var resolved = template;
    args.forEach((placeholder, value) {
      resolved = resolved.replaceAll('{${placeholder}}', value.toString());
    });
    return resolved;
  }

  static AppLocalizations of(BuildContext context) {
    return Localizations.of<AppLocalizations>(context, AppLocalizations)!;
  }
}

class _AppLocalizationsDelegate
    extends LocalizationsDelegate<AppLocalizations> {
  const _AppLocalizationsDelegate();

  @override
  bool isSupported(Locale locale) =>
      AppLocalizations.supportedLocales.contains(Locale(locale.languageCode));

  @override
  Future<AppLocalizations> load(Locale locale) async {
    return AppLocalizations(locale);
  }

  @override
  bool shouldReload(LocalizationsDelegate<AppLocalizations> old) => false;
}
